<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PNEUMOweb - Pages</title>
    <link rel="stylesheet" href="pages.css">
</head>
<body>
    <nav class="navigation">
        <a href="index.html" class="nav-link">Home</a>
        <a href="pages.html?page=background" class="nav-link">Background</a>
        <a href="pages.html?page=faq" class="nav-link">FAQ</a>
        <a href="pages.html?page=feedback" class="nav-link">FEEDBACK</a>
    </nav>
<header class="header">
    <img src="logo.png" alt="Logo" class="logo-img" style="width:60px;">
    <div>
        <h1 class="main-title">PNEUMOweb</h1>
        <div class="subtitle">web-based pneumonia screening system</div>
    </div>
</header>

<div class="pages-container">
    <div class="left-section">
        <div class="background-container">
            <div class="section-header">
                <h2 class="section-title">About PNEUMOweb</h2>
            </div>
            <div class="slide-content">
                <div class="content-card">
                    <h3 class="content-title">Pneumonia Screening Tool</h3>
                    <p>PNEUMOweb is a web-based pneumonia screening tool designed to help users assess their risk of pneumonia based on their symptoms and risk factors.</p>
                    <div class="visual-container">
                        <div class="diagram">
                            <div class="diagram-step">
                                <div class="step-number">1</div>
                                <div class="step-title">Answer Questions</div>
                                <div class="step-desc">21 Health Questions</div>
                                <div class="tooltip">Complete a comprehensive questionnaire covering symptoms, demographics, and medical history in just 3-5 minutes</div>
                            </div>
                            <div class="arrow">‚Üí</div>
                            <div class="diagram-step">
                                <div class="step-number">2</div>
                                <div class="step-title">Fast Analysis</div>
                                <div class="step-desc">Risk Assessment</div>
                                <div class="tooltip">Advanced algorithms analyze your responses using validated clinical indicators to assess pneumonia risk</div>
                            </div>
                            <div class="arrow">‚Üí</div>
                            <div class="diagram-step">
                                <div class="step-number">3</div>
                                <div class="step-title">Get Results</div>
                                <div class="step-desc">Risk Level & Advice</div>
                                <div class="tooltip">Receive instant results with personalized recommendations and guidance on next steps for your health</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-content" style="display:none;">
                <div class="content-card">
                    <h3 class="content-title">Comprehensive Assessment</h3>
                    <p>Our screening process consists of 19 carefully designed questions covering basic information, symptoms, and risk factors to provide accurate assessment.</p>
                    <div class="visual-container">
                        <div class="process-flow">
                            <div class="flow-row">
                                <div class="diagram-step">
                                    <div class="step-number">üìã</div>
                                    <div class="step-title">Basic Info</div>
                                    <div class="step-desc">Age, Gender, Duration</div>
                                    <div class="tooltip">Age and gender help assess risk factors, while symptom duration helps determine severity</div>
                                </div>
                                <div class="diagram-step">
                                    <div class="step-number">üå°Ô∏è</div>
                                    <div class="step-title">Symptoms</div>
                                    <div class="step-desc">Fever, Cough, Breathing</div>
                                    <div class="tooltip">Key pneumonia symptoms including fever patterns, cough characteristics, and breathing difficulties</div>
                                </div>
                            </div>
                            <div class="flow-row">
                                <div class="diagram-step">
                                    <div class="step-number">‚ö†Ô∏è</div>
                                    <div class="step-title">Risk Factors</div>
                                    <div class="step-desc">Smoking, Vaccination</div>
                                    <div class="tooltip">Medical history including smoking status, vaccination records, and underlying health conditions</div>
                                </div>
                                <div class="diagram-step">
                                    <div class="step-number">üìä</div>
                                    <div class="step-title">Analysis</div>
                                    <div class="step-desc">Pattern Recognition</div>
                                    <div class="tooltip bottom">AI algorithms identify patterns in your responses to calculate pneumonia risk probability</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-content" style="display:none;">
                <div class="content-card">
                    <h3 class="content-title">Instant Results</h3>
                    <p>Get instant results with risk level assessment (Low, Moderate, or High) and personalized recommendations based on your responses.</p>
                    <div class="visual-container">
                        <div class="risk-levels">
                            <div class="risk-level risk-low">
                                <div class="risk-level-title">LOW RISK</div>
                                <div class="risk-level-desc">Monitor symptoms & stay healthy</div>
                                <div class="tooltip">Low probability of pneumonia. Continue monitoring and maintain good health practices</div>
                            </div>
                            <div class="risk-level risk-moderate">
                                <div class="risk-level-title">MODERATE</div>
                                <div class="risk-level-desc">See healthcare provider soon</div>
                                <div class="tooltip">Some symptoms suggest possible pneumonia. Consult healthcare provider for proper evaluation</div>
                            </div>
                            <div class="risk-level risk-high">
                                <div class="risk-level-title">HIGH RISK</div>
                                <div class="risk-level-desc">Seek immediate medical care</div>
                                <div class="tooltip">High probability of pneumonia. Seek immediate medical attention for diagnosis and treatment</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-content" style="display:none;">
                <div class="content-card">
                    <h3 class="content-title">Privacy Protection</h3>
                    <p>Your privacy is important to us. All screening data is processed locally and can be saved securely to your device.</p>
                    <div class="visual-container">
                        <div class="privacy-features">
                            <div class="privacy-item">
                                <span class="privacy-icon">üîí</span>
                                <div class="privacy-title">Local Processing</div>
                                <div class="privacy-desc">Data stays on your device</div>
                                <div class="tooltip">All calculations are performed on your device - no data sent to external servers</div>
                            </div>
                            <div class="privacy-item">
                                <span class="privacy-icon">üö´</span>
                                <div class="privacy-title">No Account Required</div>
                                <div class="privacy-desc">Anonymous screening</div>
                                <div class="tooltip">No registration, login, or personal information required to use the screening tool</div>
                            </div>
                            <div class="privacy-item">
                                <span class="privacy-icon">üì±</span>
                                <div class="privacy-title">Offline Ready</div>
                                <div class="privacy-desc">Works without internet</div>
                                <div class="tooltip bottom">Once loaded, the app works completely offline without needing internet connection</div>
                            </div>
                            <div class="privacy-item">
                                <span class="privacy-icon">üíæ</span>
                                <div class="privacy-title">Save Results</div>
                                <div class="privacy-desc">Download your report</div>
                                <div class="tooltip bottom">Export your screening results as a PDF to share with healthcare providers</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-content" style="display:none;">
                <div class="content-card">
                    <h3 class="content-title">Medical Disclaimer</h3>
                    <p>Remember: This tool is for screening purposes only. Always consult with a healthcare professional for proper medical diagnosis and treatment.</p>
                    <div class="visual-container">
                        <div class="disclaimer-box">
                            <span class="disclaimer-icon">‚öïÔ∏è</span>
                            <div class="disclaimer-title">IMPORTANT NOTICE</div>
                            <div class="disclaimer-text">
                                This is a screening tool, not a diagnostic tool. If you have serious symptoms or concerns, please contact a healthcare professional immediately.
                            </div>
                            <div class="tooltip bottom">This tool supplements but does not replace professional medical judgment and diagnosis</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-controls" style="position:absolute;bottom:16px;left:50%;transform:translateX(-50%);display:flex;gap:10px;">
                <span class="slide-dot" data-slide="0"></span>
                <span class="slide-dot" data-slide="1"></span>
                <span class="slide-dot" data-slide="2"></span>
                <span class="slide-dot" data-slide="3"></span>
                <span class="slide-dot" data-slide="4"></span>
            </div>
        </div>
    </div>

    <div class="right-section">
        <!-- FAQ Section -->
        <div class="faq-section">
            <div class="section-header">
                <h2 class="section-title">Frequently Asked Questions</h2>
            </div>
            <div class="faq-list">
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">01</span>
                        <span class="faq-text">What is PNEUMOweb?</span>
                    </div>
                    <div class="faq-answer">
                        <p>PNEUMOweb is a free, web-based screening tool that helps rural residents and health workers check for possible signs of pneumonia. It asks simple health questions and gives a risk level (Low, Moderate, or High).</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">02</span>
                        <span class="faq-text">Is PNEUMOweb a substitute for a doctor?</span>
                    </div>
                    <div class="faq-answer">
                        <p>No. PNEUMOweb is for information and guidance only. It cannot diagnose pneumonia. If your symptoms are severe or getting worse, please see a doctor or visit your nearest health center immediately.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">03</span>
                        <span class="faq-text">Who can use this tool?</span>
                    </div>
                    <div class="faq-answer">
                        <p>Anyone. It is designed for:</p>
                        <ul class="faq-list-items">
                            <li>Local residents who want to check their symptoms</li>
                            <li>Barangay Health Workers (BHWs) who assist patients in the community</li>
                        </ul>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">04</span>
                        <span class="faq-text">Do I need the internet to use PNEUMOweb?</span>
                    </div>
                    <div class="faq-answer">
                        <p>Not always. Once loaded, the app can work offline on your device. The screening questions and results will still work even without internet.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">05</span>
                        <span class="faq-text">What kind of information does it ask?</span>
                    </div>
                    <div class="faq-answer">
                        <p>The tool asks about:</p>
                        <ul class="faq-list-items">
                            <li>Basic information (age, gender, days of illness)</li>
                            <li>Symptoms (cough, fever, breathing difficulty, chest pain, fatigue, etc.)</li>
                            <li>Risk factors (smoking, vaccination, recent illness)</li>
                            <li>Optional: upload a chest X-ray (for reference only, not analyzed)</li>
                        </ul>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">06</span>
                        <span class="faq-text">Does the app store or share my personal data?</span>
                    </div>
                    <div class="faq-answer">
                        <p>No. Your answers are processed only on your device. No login, account, or personal data storage is required.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">07</span>
                        <span class="faq-text">What should I do if the result says "High Risk"?</span>
                    </div>
                    <div class="faq-answer">
                        <p>Go to your nearest health center or hospital immediately. Bring your child or family member to a health professional for proper diagnosis and treatment.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">08</span>
                        <span class="faq-text">What if my result is "Low Risk"?</span>
                    </div>
                    <div class="faq-answer">
                        <p>This means your answers do not strongly suggest pneumonia. However, continue monitoring your symptoms. If you feel worse, seek medical help.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">09</span>
                        <span class="faq-text">Can children use this tool?</span>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, but a parent or health worker should answer the questions for them. There are child-specific questions about feeding and breathing patterns.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span class="faq-number">10</span>
                        <span class="faq-text">What languages are available?</span>
                    </div>
                    <div class="faq-answer">
                        <p>PNEUMOweb supports English and Tagalog (Filipino). Other local languages (Ilocano, Bisaya, etc.) may be added in the future.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feedback Section -->
        <div class="review-section">
            <div class="feedback-container">
                <div class="feedback-left">
                    <div class="feedback-card">
                        <div class="card-header">
                            <h3 class="card-title">Ask a Question</h3>
                        </div>
                        <form id="questionForm" autocomplete="off">
                            <input type="text" id="questionInput" name="questionInput" placeholder="Type your question or comment..." required>
                            <div id="questionActions" class="form-actions" style="display:none;">
                                <button type="submit">Submit Question</button>
                                <button type="button" id="cancelQuestion">Cancel</button>
                            </div>
                        </form>
                        <div class="feedback-list" id="questionList">
                            <!-- Past questions/comments will appear here -->
                        </div>
                    </div>
                </div>

                <div class="feedback-right">
                    <div class="feedback-card">
                        <div class="card-header">
                            <h3 class="card-title">Rate Your Experience</h3>
                        </div>
                        <div class="rating-container">
                            <div class="star-rating" id="starRating">
                                <span data-star="1">&#9734;</span>
                                <span data-star="2">&#9734;</span>
                                <span data-star="3">&#9734;</span>
                                <span data-star="4">&#9734;</span>
                                <span data-star="5">&#9734;</span>
                            </div>
                            <p class="rating-text">Click to rate</p>
                        </div>
                        <form id="reviewForm" style="display:none;">
                            <input type="text" id="reviewInput" name="reviewInput" placeholder="Share your experience..." required>
                            <div id="reviewActions" class="form-actions" style="display:none;">
                                <button type="submit">Submit Review</button>
                                <button type="button" id="cancelReview">Cancel</button>
                            </div>
                        </form>
                        <div class="review-list" id="reviewList">
                            <!-- Past reviews will appear here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> <!-- closes pages-container -->

<div class="footer">
    <strong>Disclaimer:</strong>
    This screening tool is for informational purposes only and does not replace professional medical advice. Please consult a healthcare professional for proper diagnosis and treatment.
</div>

<script>
// Query parameter helper function
function getQueryParam(name) {
    const url = new URL(window.location.href);
    return url.searchParams.get(name);
}

// Global arrays to store data
let questions = [];
let reviews = [];

document.addEventListener('DOMContentLoaded', function() {
    // Initialize page highlighting based on URL parameter
    initializePageHighlighting();

    // Initialize tooltips functionality
    initializeTooltips();

    // Initialize slideshow functionality
    initializeSlideshow();

    // Initialize FAQ functionality
    initializeFAQ();

    // Initialize question/comment form
    initializeQuestionForm();

    // Initialize review form
    initializeReviewForm();
});

function initializeTooltips() {
    const diagramSteps = document.querySelectorAll('.diagram-step, .risk-level, .privacy-item, .disclaimer-box');

    diagramSteps.forEach(step => {
        const tooltip = step.querySelector('.tooltip');
        if (!tooltip) return;

        // Position tooltip dynamically
        function positionTooltip() {
            const stepRect = step.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            const viewportHeight = window.innerHeight;
            const viewportWidth = window.innerWidth;

            // Reset classes
            tooltip.classList.remove('bottom', 'left', 'right');

            // Check if tooltip would go off-screen at the top
            if (stepRect.top - tooltipRect.height < 20) {
                tooltip.classList.add('bottom');
            }

            // Check horizontal positioning for narrow screens
            if (stepRect.left + tooltipRect.width > viewportWidth - 20) {
                tooltip.classList.add('right');
            } else if (stepRect.left < 20) {
                tooltip.classList.add('left');
            }
        }

        // Desktop hover events
        step.addEventListener('mouseenter', () => {
            positionTooltip();
        });

        // Mobile touch events
        let touchTimeout;
        step.addEventListener('touchstart', (e) => {
            e.preventDefault();
            clearTimeout(touchTimeout);

            // Hide other tooltips
            document.querySelectorAll('.tooltip').forEach(t => {
                if (t !== tooltip) {
                    t.style.opacity = '0';
                    t.style.visibility = 'hidden';
                }
            });

            positionTooltip();
            tooltip.style.opacity = '1';
            tooltip.style.visibility = 'visible';

            // Auto-hide after 3 seconds
            touchTimeout = setTimeout(() => {
                tooltip.style.opacity = '0';
                tooltip.style.visibility = 'hidden';
            }, 3000);
        });

        // Hide on touch outside
        document.addEventListener('touchstart', (e) => {
            if (!step.contains(e.target)) {
                tooltip.style.opacity = '0';
                tooltip.style.visibility = 'hidden';
                clearTimeout(touchTimeout);
            }
        });
    });
}

function initializeSlideshow() {
    const slides = document.querySelectorAll('.left-section .slide-content');
    const dots = document.querySelectorAll('.slide-dot');
    let currentSlide = 0;
    let slideInterval;

    function showSlide(idx, withAnimation = true) {
        // Hide all slides
        slides.forEach((slide, i) => {
            slide.style.display = 'none';
            slide.style.opacity = '0';
        });

        // Update dots
        dots.forEach((dot, i) => {
            dot.classList.toggle('active', i === idx);
        });

        // Show current slide with animation
        if (slides[idx]) {
            slides[idx].style.display = 'block';

            if (withAnimation) {
                // Trigger animations for diagram elements
                setTimeout(() => {
                    slides[idx].style.opacity = '1';
                    const animatedElements = slides[idx].querySelectorAll('.diagram-step, .risk-level, .privacy-item, .disclaimer-box');
                    animatedElements.forEach((el, i) => {
                        el.style.animationDelay = `${i * 0.1 + 0.1}s`;
                        el.style.animationPlayState = 'running';
                    });
                }, 50);
            } else {
                slides[idx].style.opacity = '1';
            }
        }

        currentSlide = idx;
    }

    function nextSlide() {
        const next = (currentSlide + 1) % slides.length;
        showSlide(next);
    }

    function startAutoSlide() {
        slideInterval = setInterval(nextSlide, 8000); // 8 seconds
    }

    function stopAutoSlide() {
        clearInterval(slideInterval);
    }

    // Dot click handlers
    dots.forEach((dot, i) => {
        dot.addEventListener('click', function() {
            stopAutoSlide();
            showSlide(i);
            startAutoSlide();
        });
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
            stopAutoSlide();
            const prev = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(prev);
            startAutoSlide();
        } else if (e.key === 'ArrowRight') {
            stopAutoSlide();
            nextSlide();
            startAutoSlide();
        }
    });

    // Pause on hover
    const leftSection = document.querySelector('.left-section');
    if (leftSection) {
        leftSection.addEventListener('mouseenter', stopAutoSlide);
        leftSection.addEventListener('mouseleave', startAutoSlide);
    }

    // Touch/swipe support
    let touchStartX = 0;
    let touchEndX = 0;

    leftSection?.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
    });

    leftSection?.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    });

    function handleSwipe() {
        const swipeThreshold = 50;
        const swipeDistance = touchEndX - touchStartX;

        if (Math.abs(swipeDistance) > swipeThreshold) {
            stopAutoSlide();
            if (swipeDistance > 0) {
                // Swipe right - previous slide
                const prev = (currentSlide - 1 + slides.length) % slides.length;
                showSlide(prev);
            } else {
                // Swipe left - next slide
                nextSlide();
            }
            startAutoSlide();
        }
    }

    // Initialize
    showSlide(0);
    startAutoSlide();
}

function initializePageHighlighting() {
    const leftSection = document.querySelector('.left-section');
    const faqSection = document.querySelector('.faq-section');
    const reviewSection = document.querySelector('.review-section');
    const page = getQueryParam('page');

    if (page === 'background' && leftSection) {
        leftSection.classList.add('pulse');
        setTimeout(() => leftSection.classList.remove('pulse'), 2000);
    } else if (page === 'faq' && faqSection) {
        faqSection.classList.add('pulse');
        setTimeout(() => faqSection.classList.remove('pulse'), 2000);
    } else if (page === 'feedback' && reviewSection) {
        reviewSection.classList.add('pulse');
        setTimeout(() => reviewSection.classList.remove('pulse'), 2000);
    }
}

function initializeFAQ() {
    document.querySelectorAll('.faq-question').forEach(function(q) {
        q.addEventListener('click', function() {
            const item = this.parentElement;
            // Close other items
            document.querySelectorAll('.faq-item').forEach(i => {
                if(i !== item) i.classList.remove('open');
            });
            // Toggle current item
            item.classList.toggle('open');
        });
    });
}

function initializeQuestionForm() {
    const questionForm = document.getElementById('questionForm');
    const questionInput = document.getElementById('questionInput');
    const questionList = document.getElementById('questionList');
    const questionActions = document.getElementById('questionActions');
    const cancelQuestion = document.getElementById('cancelQuestion');

    function renderQuestions() {
        if (questionList) {
            questionList.innerHTML = questions.map(q =>
                `<div class="feedback-item">
                    <div class="feedback-content">
                        <span class="feedback-icon">Q</span>
                        <span class="feedback-text">${q}</span>
                    </div>
                </div>`
            ).join('');
        }
    }

    // Form submission
    questionForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const value = questionInput.value.trim();
        if (value) {
            questions.unshift(value); // Add to beginning of array
            renderQuestions(); // Update display
            questionInput.value = ''; // Clear input
            questionActions.style.display = 'none'; // Hide actions
        }
    });

    // Show actions when input is focused
    questionInput.addEventListener('focus', function() {
        questionActions.style.display = 'flex';
    });

    // Handle input change to show/hide actions
    questionInput.addEventListener('input', function() {
        if (this.value.trim()) {
            questionActions.style.display = 'flex';
        }
    });

    // Cancel button
    cancelQuestion.addEventListener('click', function() {
        questionInput.value = '';
        questionActions.style.display = 'none';
        questionInput.blur();
    });

    // Hide actions when clicking outside
    document.addEventListener('click', function(e) {
        const target = e.target;
        if (!questionForm.contains(target)) {
            if (!questionInput.value.trim()) {
                questionActions.style.display = 'none';
            }
        }
    });
}

function initializeReviewForm() {
    const starRating = document.getElementById('starRating');
    const reviewForm = document.getElementById('reviewForm');
    const reviewInput = document.getElementById('reviewInput');
    const reviewList = document.getElementById('reviewList');
    const reviewActions = document.getElementById('reviewActions');
    const cancelReview = document.getElementById('cancelReview');

    let selectedStars = 0;

    function updateStars() {
        const stars = starRating.querySelectorAll('span');
        stars.forEach(star => {
            const starValue = parseInt(star.getAttribute('data-star') || '0');
            const isActive = starValue <= selectedStars;
            star.classList.toggle('active', isActive);
            star.innerHTML = isActive ? '&#9733;' : '&#9734;'; // filled vs empty star
        });
    }

    function renderReviews() {
        if (reviewList) {
            reviewList.innerHTML = reviews.map(r =>
                `<div class="review-item">
                    <div class="review-content">
                        <span class="single-star-rating">
                            <span class="star-background">&#9733;</span>
                            <span class="star-number">${r.stars}</span>
                        </span>
                        <span class="review-text">${r.text}</span>
                    </div>
                </div>`
            ).join('');
        }
    }

    // Star click handlers
    starRating.querySelectorAll('span').forEach(star => {
        star.addEventListener('click', function() {
            selectedStars = parseInt(this.getAttribute('data-star') || '0');
            updateStars();
            reviewForm.style.display = 'block';
            reviewInput.focus();
        });
    });

    // Review form submission
    reviewForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const reviewText = reviewInput.value.trim();
        if (reviewText && selectedStars > 0) {
            reviews.unshift({stars: selectedStars, text: reviewText}); // Add to beginning
            renderReviews(); // Update display

            // Reset form
            reviewInput.value = '';
            reviewForm.style.display = 'none';
            reviewActions.style.display = 'none';
            selectedStars = 0;
            updateStars();
        }
    });

    // Show actions when review input is focused
    reviewInput.addEventListener('focus', function() {
        reviewActions.style.display = 'flex';
    });

    // Handle input change
    reviewInput.addEventListener('input', function() {
        if (this.value.trim()) {
            reviewActions.style.display = 'flex';
        }
    });

    // Cancel review
    cancelReview.addEventListener('click', function() {
        reviewInput.value = '';
        reviewActions.style.display = 'none';
        reviewForm.style.display = 'none';
        selectedStars = 0;
        updateStars();
    });

    // Hide form when clicking outside
    document.addEventListener('click', function(e) {
        const target = e.target;
        if (!reviewForm.contains(target) && !starRating.contains(target)) {
            if (!reviewInput.value.trim()) {
                reviewActions.style.display = 'none';
            }
        }
    });

    // Initialize stars
    updateStars();
}
</script>
</body>
</html>
